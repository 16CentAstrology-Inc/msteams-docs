"use strict";angular.module("teamsSiteApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$locationProvider","$routeProvider",function(a,b){console.log("route provider is there"),b.when("/",{templateUrl:"/views/main.html",controller:"MainCtrl",controllerAs:"main",resolve:{appData:["appDataFactory",function(a){return console.log("route resolved to /"),a.load()}]}}).when("/:deepLink*",{templateUrl:"/views/main.html",controller:"MainCtrl",controllerAs:"main",resolve:{appData:["appDataFactory",function(a){return console.log("route resolved to / with link"),a.load()}]}}).when("/about",{templateUrl:"/views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("teamsSiteApp").factory("appDataFactory",["$http",function(a){console.log("loading app data factory");var b={};b.currentChapter={},b.currentSection={},b.currentSubSection={};var c=a.get("../data/appdata.json").then(function(a){b.data=a.data;for(var c=0;c<b.data.chapters.length;c++)if(b.data.chapters[c].filepath="data/"+b.data.chapters[c].pathID+".html",b.data.chapters[c].sections)for(var d=0;d<b.data.chapters[c].sections.length;d++)if(b.data.chapters[c].sections[d].filepath="data/"+b.data.chapters[c].pathID+"-"+b.data.chapters[c].sections[d].pathID+".html",b.data.chapters[c].sections[d].subSections)for(var e=0;e<b.data.chapters[c].sections[d].subSections.length;e++)b.data.chapters[c].sections[d].subSections[e].filepath="data/"+b.data.chapters[c].pathID+"-"+b.data.chapters[c].sections[d].pathID+"-"+b.data.chapters[c].sections[d].subSections[e].pathID+".html";b.currentChapter=b.data.chapters[0]},function(a){console.log("HTTP Request failed with: "+a.status)});return b.selectChapter=function(a){b.setCurrentSection(null),b.setCurrentSubSection(null);var c;b.data.chapters.forEach(function(b){b.pathID===a&&(c=b)}),c||(c=b.data.chapters[0]),b.setCurrentChapter(c),c.showSectionNav&&b.setCurrentSection(c.sections[0])},b.selectSection=function(a,c){b.selectChapter(a);var d;b.currentChapter.sections.forEach(function(a){a.pathID===c&&(d=a)}),d||(d=b.currentChapter.sections[0]),b.setCurrentSection(d)},b.selectSubSection=function(a){var c;b.currentSection.subSections.forEach(function(b){b.pathID===a&&(c=b)}),c||(c=b.currentSection.subSections[0]),b.setCurrentSubSection(c)},b.getCurrentChapter=function(){return b.currentChapter},b.setCurrentChapter=function(a){b.currentChapter=a},b.getCurrentSection=function(){return b.currentSection},b.setCurrentSection=function(a){b.currentSection=a},b.getCurrentSubSection=function(){return b.currentSubSection},b.setCurrentSubSection=function(a){b.currentSubSection=a},b.load=function(){return c},b["goto"]=function(a,c){var d=a.split("/");switch(console.log(d),d.length){case 0:case 1:b.selectChapter(d[0]);break;case 2:b.selectSection(d[0],d[1]),c&&b.selectSubSection(c)}},b}]),angular.module("teamsSiteApp").controller("MainCtrl",["$scope","$routeParams","$location","appDataFactory",function(a,b,c,d){console.log("LOADING MAIN CONTROL"),a.applicationData=d.data,a.appDataFactory=d,a.selectChapter=function(a){c.path(a.pathID).hash("")},a.selectSection=function(a,b){c.path(a.pathID+"/"+b.pathID).hash("")},a.selectSubSection=function(b){c.path(a.appDataFactory.currentChapter.pathID+"/"+a.appDataFactory.currentSection.pathID).hash(b.pathID)},a.testFunction=function(){console.log("foo"),console.log(a.applicationData)},a.returnToRoot=function(){c.path("/").hash(""),d["goto"]("","")},b.deepLink?d["goto"](b.deepLink,c.hash()):a.returnToRoot()}]),angular.module("teamsSiteApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("teamsSiteApp").directive("interactiveList",["$location","appDataFactory",function(a,b){return{restrict:"E",scope:{listName:"@"},templateUrl:"../views/interactiveList.html",link:function(a){var c=[];b.data.interactiveLists.forEach(function(b){b.listName===a.listName&&(c=b.data)},this),a.listItems=c,a.selectedListItem=a.listItems[0],a.selectItem=function(b){a.selectedListItem=b},a.handleSwipeRight=function(){var b=a.listItems.indexOf(a.selectedListItem);b--,0>b&&(b=a.listItems.length-1),a.selectedListItem=a.listItems[b]},a.handleSwipeLeft=function(){var b=a.listItems.indexOf(a.selectedListItem);b++,b>=a.listItems.length&&(b=0),a.selectedListItem=a.listItems[b]}}}}]),angular.module("teamsSiteApp").directive("siteFooter",["appDataFactory",function(a){return{restrict:"E",scope:{},templateUrl:"../views/siteFooter.html",link:function(b){b.footerContent=a.data.footerContent}}}]),angular.module("teamsSiteApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/interactiveList.html",'<div class="selectable-list"> <ul class="desktop-nav"> <li ng-class="{true:\'selected\'}[listItem === selectedListItem]" ng-repeat="listItem in listItems" ng-click="selectItem(listItem)"> <h5> {{listItem.heading}} </h5> <div class="details"> <p> {{listItem.details}} </p> <a ng-if="listItem.link" href="{{listItem.link}}">Learn more<img src="../icons/cta-arrow.svg"></a> </div> </li> </ul> <div> <img ng-src="{{selectedListItem.imagePath}}" ng-swipe-right="handleSwipeRight()" ng-swipe-left="handleSwipeLeft()"> <div class="mobile-nav"> <div class="carousel-dot" title="{{listItem.heading}}" ng-class="{true:\'selected\'}[listItem === selectedListItem]" ng-repeat="listItem in listItems" ng-click="selectItem(listItem)"></div> </div> <div class="mobile-nav"> <h5> {{selectedListItem.heading}} </h5> <div class="details"> <p> {{selectedListItem.details}} </p> <a ng-if="selectedListItem.link" href="{{selectedListItem.link}}">Learn more</a> </div> </div> </div> </div>'),a.put("views/main.html",'<div class="topbar-container layout-outer"> <div class="layout-inner"> <div class="topbar navigation"> <div class="title" ng-click="returnToRoot()"> <span> {{applicationData.apptitle}} </span> <span> {{applicationData.appsubtitle}} </span> </div> <div class="nav-wide chapter-navigation"> <div class="chapter-title" ng-repeat="chapter in applicationData.chapters" ng-click="selectChapter(chapter)"> <div> <span class="visible-title" ng-class="{true:\'is-selected\'}[chapter === appDataFactory.currentChapter]">{{chapter.chaptertitle}}</span> </div> <span class="is-selected ghost-title">{{chapter.chaptertitle}}</span> </div> </div> <div class="nav-narrow nav-buttons"> <!--<div class="icon menu"></div>--> <div class="menu-button" ng-hide="showNavMenu" ng-click="showNavMenu = true"> <ng-include class="site-icon icon-menu" src="\'icons/icon-menu.html\'"></ng-include> </div> <div class="close-button" ng-show="showNavMenu" ng-click="showNavMenu = false"> <ng-include class="site-icon icon-close" src="\'icons/icon-close.html\'"></ng-include> </div> </div> </div> </div> </div> <!--make this into the mobile/full screen navigation--> <div class="navigation nav-narrow full-screen-nav" ng-show="showNavMenu"> <div class="layout-outer"> <div class="layout-inner" ng-repeat="chapter in applicationData.chapters"> <div class="chapter-title" ng-click="selectChapter(chapter)"> <span ng-class="{true:\'is-selected\'}[chapter === appDataFactory.currentChapter]">{{chapter.chaptertitle}}</span> </div> <div ng-if="chapter.showSectionNav" ng-repeat="section in chapter.sections"> <div class="section-title" ng-click="selectSection(chapter, section)"> <span ng-class="{true:\'is-selected\'}[section === appDataFactory.currentSection]">{{section.title}}</span> </div> </div> <hr> </div> </div> </div> <div class="content-container"> <div class="detail-view" ng-if="appDataFactory.currentChapter.showSectionNav"> <div class=""> <div class="content-view"> <div class="page-column-container" scroll-handle-selection> <div class="sidebar page-column-left navigation nav-wide"> <!-- Sidebar navigation shows sections for current "chapter" --> <div class="sidebar-navigation"> <div ng-show="appDataFactory.currentChapter.sections" ng-repeat="section in appDataFactory.currentChapter.sections"> <div class="section-title" ng-click="selectSection(appDataFactory.currentChapter, section)"> <span ng-class="{true:\'is-selected\'}[section === appDataFactory.currentSection]">{{section.title}}</span> </div> <div class="sub-section-title" ng-show="section === appDataFactory.currentSection" ng-repeat="subSection in section.subSections" ng-click="selectSubSection(subSection)"> <span><!--ng-class="{true:\'is-selected\'}[subSection === appDataFactory.currentSubSection]"-->{{subSection.title}}</span> </div> </div> </div> </div> <div class="page-column-right"> <div ng-if="appDataFactory.currentChapter && !appDataFactory.currentSection"> <ng-include src="appDataFactory.currentChapter.filepath"></ng-include> </div> <div ng-if="appDataFactory.currentSection"> <div class="section-details"> <div class="sub-section-details not-separate-pages" ng-if="!appDataFactory.currentSection.subSections"> <ng-include src="appDataFactory.currentSection.filepath"></ng-include> </div> <div class="sub-section-details" ng-if="appDataFactory.currentSection.subSections" ng-repeat="subSection in appDataFactory.currentSection.subSections"> <a name="{{subSection.pathID}}"></a> <div> <ng-include src="subSection.filepath"></ng-include> </div> <hr> </div> </div> </div> </div> </div> <site-footer></site-footer> </div> </div> </div> <div class="single-page-view" ng-if="!appDataFactory.currentChapter.showSectionNav"> <div class="layout-outer"> <ng-include class="layout-inner" src="appDataFactory.currentChapter.filepath"></ng-include> </div> <div class="layout-outer" ng-class="section.cssClasses" ng-repeat="section in appDataFactory.currentChapter.sections"> <div class="layout-inner"> <ng-include src="section.filepath"></ng-include> </div> </div> <site-footer></site-footer> </div> </div>'),a.put("views/navigation.html",""),a.put("views/siteFooter.html",'<div class="site-footer"> <div class="layout-outer"> <div class="layout-inner"> <div class="three-column-layout"> <div> <blockquote> {{footerContent.description}} </blockquote> </div> <div ng-repeat="columnData in footerContent.columnData"> <h6>{{columnData.title}}</h6> <a ng-repeat="link in columnData.links" href="{{link.link}}" target="_blank"> <img ng-if="link.iconPath" ng-src="{{link.iconPath}}"><span>{{link.text}}</span> </a> </div> </div> </div> </div> <div class="layout-outer"> <div class="layout-inner"> <span> {{footerContent.copyrightText}} </span> <div class="footer-links"> <span ng-repeat="footerLink in footerContent.footerLinks"> <a ng-href="{{footerLink.link}}" target="_blank">{{footerLink.text}}</a> </span> </div> </div> </div> </div>')}]);